<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Hall of Masters</title>
    <link rel="stylesheet" href="https://unpkg.com/chessground/assets/chessground.base.css">
    <link rel="stylesheet" href="https://unpkg.com/chessground/assets/chessground.brown.css">
    <link rel="stylesheet" href="https://lichess1.org/assets/_899m5u/piece-css/alpha.css">
    
    <style>
        body { background: #161512; color: #fff; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { display: flex; gap: 40px; align-items: flex-start; }
        
        /* Define tamanho fixo para o tabuleiro aparecer */
        .board-wrapper {
            width: 550px; height: 550px;
            border: 12px solid #3d2d1e;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            position: relative;
        }

        #painel {
            width: 300px; background: #262421; padding: 25px; border-radius: 12px;
            display: flex; flex-direction: column; align-items: center; border: 1px solid #3d3d3d;
        }

        #foto-mestre {
            width: 200px; height: 200px;
            border-radius: 8px; border: 3px solid #c3a000;
            margin-bottom: 20px; object-fit: cover; 
            background: #312e2b;
        }

        .nome-mestre { color: #ffd700; font-size: 1.6em; font-weight: bold; margin-bottom: 30px; text-align: center; min-height: 40px; }
        
        .btn {
            width: 100%; padding: 18px; background: #c3a000; color: #000;
            border: none; font-weight: bold; cursor: pointer; border-radius: 6px;
            font-size: 1.1em; transition: 0.3s;
        }
        .btn:hover { background: #ffd700; transform: scale(1.03); }
        
        /* Garante que o Chessground ocupa o container */
        .cg-wrap { width: 100% !important; height: 100% !important; display: block; }
    </style>
</head>
<body>

<div class="container">
    <div class="board-wrapper">
        <div id="chess-board" class="cg-wrap brown alpha"></div>
    </div>

    <div id="painel">
        <img id="foto-mestre" src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Chess_Set.jpg/250px-Chess_Set.jpg" alt="Mestre">
        <div class="nome-mestre" id="nome-mestre">HALL OF MASTERS</div>
        <button class="btn" onclick="novoMestre()">DESAFIAR MESTRE</button>
    </div>
</div>

<script src="https://unpkg.com/chessground"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>

<script>
    const chess = new Chess();
    const boardNode = document.getElementById('chess-board');
    const fotoEl = document.getElementById('foto-mestre');
    const nomeEl = document.getElementById('nome-mestre');

    // Lista de mestres com fotos reais da Wikipedia
    const mestresData = {
        "Anand": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Viswanathan_Anand_01.jpg/220px-Viswanathan_Anand_01.jpg",
        "Capablanca": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Jose_Raul_Capablanca_1931.jpg/220px-Jose_Raul_Capablanca_1931.jpg",
        "Carlsen": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Magnus_Carlsen_2024.jpg/220px-Magnus_Carlsen_2024.jpg",
        "Fischer": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/be/Bobby_Fischer_1960.jpg/220px-Bobby_Fischer_1960.jpg",
        "Karpov": "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Anatoly_Karpov_2014.jpg/220px-Anatoly_Karpov_2014.jpg",
        "Keres": "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Paul_Keres_1961.jpg/220px-Paul_Keres_1961.jpg",
        "Lasker": "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Emanuel_Lasker_1933.jpg/220px-Emanuel_Lasker_1933.jpg",
        "Marshall": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Frank_Marshall_1912.jpg/220px-Frank_Marshall_1912.jpg",
        "Polgar": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/Judit_Polgar_2012.jpg/220px-Judit_Polgar_2012.jpg",
        "Rubinstein": "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Akiba_Rubinstein.jpg/220px-Akiba_Rubinstein.jpg",
        "Tal": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Mikhail_Tal_1982.jpg/220px-Mikhail_Tal_1982.jpg"
    };

    const cg = Chessground(boardNode, {
        movable: { free: false, color: 'white', dests: getDests() },
        events: {
            after: (orig, dest) => {
                chess.move({ from: orig, to: dest, promotion: 'q' });
                cg.set({ dests: getDests() });
            }
        }
    });

    function getDests() {
        const dests = new Map();
        chess.SQUARES.forEach(s => {
            const ms = chess.moves({ square: s, verbose: true });
            if (ms.length) dests.set(s, ms.map(m => m.to));
        });
        return dests;
    }

    function novoMestre() {
        const nomes = Object.keys(mestresData);
        const mestre = nomes[Math.floor(Math.random() * nomes.length)];
        nomeEl.innerText = mestre;
        fotoEl.src = mestresData[mestre];
        
        chess.reset();
        cg.set({ fen: chess.fen(), lastMove: null });
    }
</script>
</body>
</html>